<section fxLayout="row" fxLayoutAlign="space-between center">
  <h1 class="mat-headline">Library</h1>
  <article fxLayout="row" fxLayoutAlign="center center">
    <button class="grid" mat-icon-button (click)="listView = !listView">
      <ng-container *ngIf="!listView">
        <mat-icon>list</mat-icon>
      </ng-container>
      <ng-container *ngIf="listView">
        <mat-icon>grid_on</mat-icon>
      </ng-container>
    </button>
    <mat-form-field class="sort">
      <mat-label>Sort by</mat-label>
      <mat-select [formControl]="sortByControl">
        <mat-option *ngFor="let option of sortOptions" [value]="option">
          {{option}}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </article>
</section>

<!-- MAIN SEARCH BAR -->
<section class="search">
  <form [formGroup]="filterForm.search">
    <mat-form-field appearance="outline">
      <mat-label>Search for titles, directors, keywords, ...</mat-label>
      <mat-icon matPrefix svgIcon="magnifying_glasses"></mat-icon>
      <input matInput type="text" [formControl]="searchbarTextControl">
    </mat-form-field>
  </form>
</section>

<!-- FILTER SIDE CARD -->
<section fxLayout="row" fxLayoutAlign="start start" fxLayoutGap="50px" fxLayout.lt-md="column"
  fxLayoutAlign.lt-md="center center" class="filters">
  <aside fxLayout="column" class="filter">
    <mat-card>
      <h6>Filters</h6>
      <p class="mat-caption">For a specific filter, multiple choices will be applied with an "or" statement (not an "and" statement).</p>
      <mat-card-content>
        <mat-accordion multi="true">
          <!-- <ng-container [formGroup]="filterForm"> -->
          <ng-container [formGroup]="filterForm">

            <mat-divider inset></mat-divider>

            <!-- TODO INSERT FILTERS -->

          </ng-container>
        </mat-accordion>
      </mat-card-content>
    </mat-card>
  </aside>

  <!-- List || card of result -->
  <article>
    <ng-container *ngIf="(movieSearchResults$ | async) as movies">
      <div fxLayout="row" fxLayoutAlign="end start">
        <h6>There are {{ movies.length }} movies available!</h6>
      </div>
      <div fxLayout="row wrap" fxLayoutGap="20px" fxLayout.lt-md="column" fxLayoutAlign.lt-md="center center">
        <ng-container *ngIf="!listView; else displayList">
          <ng-container *ngFor="let movie of movies">

            <!-- INSERT CARD -->
            <ng-template
              [ngTemplateOutlet]="titleCardTemplate?.template || defaultTitleCard"
              [ngTemplateOutletContext]="{title: movie}"
            ></ng-template>


          </ng-container>

        </ng-container>
        <ng-template #displayList>

          <!-- TODO PASS FUNCTIONS -->
          <!-- INSERT LIST ITEM -->
          <ng-template
            [ngTemplateOutlet]="titleListItemTemplate?.template || defaultListItemCard"
            [ngTemplateOutletContext]="{titles: movies}"
          ></ng-template>

        </ng-template>
      </div>
    </ng-container>
  </article>
</section>

<!-- TODO CREATE DEFAULT -->
<ng-template #defaultTitleCard><p>Default Card</p></ng-template>
<ng-template #defaultListItemCard><p>Default List Item</p></ng-template>
