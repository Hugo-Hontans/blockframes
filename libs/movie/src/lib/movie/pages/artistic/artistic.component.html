<tunnel-page>
  <h1 subtitle>Artistic Team</h1>
  <ng-container tunnel-form>
    <section id="cast-member">
      <h3>Cast Member</h3>
      <bf-form-table [columns]="castColumns" [form]="cast" buttonText="Add Cast Member">
        <ng-template colRef="filmography" let-dir>{{  dir.filmography[0] | json }}</ng-template>
        <ng-template formView let-form>
          <article [formGroup]="form" fxLayout="column" fxLayoutGap="24px">

            <div fxLayout fxLayoutGap="24px">
              <mat-form-field appearance="outline" fxFlex>
                <mat-label>First Name</mat-label>
                <input test-id="cast-first-name" matInput formControlName="firstName" required placeholder="eg: Cast Member’s First Name" />
              </mat-form-field>

              <mat-form-field appearance="outline" fxFlex>
                <mat-label>Last Name</mat-label>
                <input test-id="cast-last-name" matInput formControlName="lastName" required />
              </mat-form-field>
            </div>

            <div fxLayout fxLayoutGap="24px">
              <static-select test-id="cast-status" scope="MEMBER_STATUS" type="model" [control]="form.get('status')" fxFlex>
                <mat-label>Status</mat-label>
                <mat-hint align="start">Please specify if the cast member is confirmed for this project or not.</mat-hint>
              </static-select>

              <div fxLayout="column" fxLayoutAlign="start center">

                <ng-container *ngFor="let cast of form.get('filmography').controls">
                  <div [formGroup]="cast" fxLayout="row" fxLayoutGap="24px">
                    <mat-form-field appearance="outline" fxFlex>
                      <mat-label>Film Title</mat-label>
                      <input matInput formControlName="title">
                    </mat-form-field>
                    <mat-form-field appearance="outline" fxFlex>
                      <mat-label>Release Year</mat-label>
                      <input matInput formControlName="year">
                    </mat-form-field>
                  </div>
                </ng-container>
              </div>
            </div>

            <mat-form-field appearance="outline">
              <mat-label>Description</mat-label>
              <textarea matInput formControlName="description"></textarea>
              <mat-hint>Additional information about the cast member.</mat-hint>
            </mat-form-field>

          </article>
        </ng-template>
      </bf-form-table>
    </section>

    <mat-divider></mat-divider>

    <section id="crew-member">
      <h3>Crew Member</h3>
      <bf-form-table [columns]="crewColumns" [form]="crew" buttonText="Add Crew Member">
        <ng-template colRef="filmography" let-dir>{{  dir.filmography[0] | json }}</ng-template>
        <ng-template formView let-form>
          <article [formGroup]="form" fxLayout="column" fxLayoutGap="24px">

            <div fxLayout fxLayoutGap="24px">
              <mat-form-field appearance="outline" fxFlex>
                <mat-label>First Name</mat-label>
                <input test-id="crew-first-name" matInput formControlName="firstName" required placeholder="eg: Crew Member’s First Name" />
              </mat-form-field>

              <mat-form-field appearance="outline" fxFlex>
                <mat-label>Last Name</mat-label>
                <input test-id="crew-last-name" matInput formControlName="lastName" required />
              </mat-form-field>
            </div>

            <div fxLayout fxLayoutGap="24px">
              <static-select test-id="crew-status" scope="MEMBER_STATUS" type="model" [control]="form.get('status')" fxFlex>
                <mat-label>Status</mat-label>
                <mat-hint align="start">Please specify if the crew member is confirmed for this project or not.</mat-hint>
              </static-select>

              <static-select test-id="crew-role" type="model" [control]="form.get('role')" scope="CREW_ROLES" fxFlex>
                <mat-label>Role</mat-label>
                <mat-hint align="start">
                  Please specify crew member's role in your project (director of photography, score composer, writer...)
                </mat-hint>
              </static-select>

              <div fxLayout="column" fxLayoutAlign="start center">

                <ng-container *ngFor="let crew of form.get('filmography').controls">
                  <div [formGroup]="crew" fxLayout="row" fxLayoutGap="24px">
                    <mat-form-field appearance="outline" fxFlex>
                      <mat-label>Crew's Filmography</mat-label>
                      <input matInput formControlName="title">
                    </mat-form-field>
                    <mat-form-field appearance="outline" fxFlex>
                      <mat-label>Crew's Filmography</mat-label>
                      <input matInput formControlName="year">
                    </mat-form-field>
                  </div>
                </ng-container>
              </div>
            </div>

            <mat-form-field appearance="outline">
              <mat-label>Description</mat-label>
              <textarea matInput test-id="crew-description" formControlName="description"></textarea>
              <mat-hint>Additional information about the crew member.</mat-hint>
            </mat-form-field>

          </article>
        </ng-template>
      </bf-form-table>
    </section>

  </ng-container>
</tunnel-page>
