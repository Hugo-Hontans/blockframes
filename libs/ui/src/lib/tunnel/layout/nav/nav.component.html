<ng-container *ngIf="steps$ | async as steps">
  <ng-container *ngFor="let step of steps">
    <mat-nav-list class="mat-expansion-panel-header-title" *ngIf="step.routes.length === 1; else multipleLinks">
      <div fxLayout="row" fxLayoutAlign="start start">
        <mat-icon [svgIcon]="step.icon"></mat-icon>
        <a [routerLink]="step.routes[0].path" routerLinkActive="active">
          {{step.title}}
        </a>
      </div>
    </mat-nav-list>
    <mat-divider></mat-divider>
    <ng-template #multipleLinks>
      <mat-accordion>
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>
              <mat-icon [svgIcon]="step.icon" bf-color="primary"></mat-icon>
              <span>{{ step.title }}</span>
            </mat-panel-title>
          </mat-expansion-panel-header>
          <mat-nav-list dense>
            <ng-container *ngFor="let route of step.routes">
              <a mat-list-item [routerLink]="route.path" routerLinkActive="active">
                {{ route.label }}
              </a>
            </ng-container>
          </mat-nav-list>
        </mat-expansion-panel>
      </mat-accordion>
    </ng-template>
  </ng-container>
</ng-container>